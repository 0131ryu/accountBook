{% extends 'layout.html' %}

{% block content %}

<main>
    <div class="inner">
        <div class="jumbotron-container">
            <div class="jumbotron-item-main">
                <div class="jumbotron-item-main-message">
                    <p>Îß§ÏùºÎß§Ïùº ÏåìÏïÑÍ∞ÄÎäî,</p>
                    <h2>ÏòÅÎã®Ïñ¥ Ïô∏Ïö∞Í∏∞</h2>
                </div>
                <div class="jumbotron-item-main-image"></div>
            </div>
            <!-- jumbotron-item-main -->
            <div class="jumbotron-item-sub">
                <p>ÏûäÏñ¥ Î≤ÑÎ¶¨Í∏∞ Ïâ¨Ïö¥ ÏòÅÎã®Ïñ¥Î•º </p>
                <p><span>Easy, Middle, Advance</span>Î°ú Î∂ÑÎ•òÌï¥ÏÑú Ïô∏ÏõåÎ¥ÖÏãúÎã§</p>
            </div>
            <div class="word-finding">
                <input type="text" class="word-find-eng" placeholder="Í≤ÄÏÉâÌï† ÏòÅÏñ¥ Îã®Ïñ¥Îäî?" value='' id="matrix-input-eng" />
                <button class="word-find-eng-btn" id="matrix-input-btn">Í≤ÄÏÉâÌïòÍ∏∞</button>
                <p class="word-find-result">[Í≤∞Í≥ºÍ∞í]
                    ÏòÅÎã®Ïñ¥ : <span class="word-find-result-eng"></span>
                    ÌïúÍ∏Ä : <span class="word-find-result-kor"></span> Ï¢ÖÎ•ò : <span class="word-find-result-type"></span>
                </p>
            </div>
        </div>
        <!-- jumbotron-container -->
        <div class="word-counting">
            <p>Ïô∏Ïö¥ Îã®Ïñ¥ Ïàò : <span id="word-counting-checked">0</span></p>
            <p>Ï¥ù Îã®Ïñ¥ Ïàò : <span id="word-counting-all">0</span></p>
        </div>
        <div class="matrix-container">
            <div class="matrix-item">
                <div class="matrix-item-header">
                    <div class="matrix-title">ü•â Easy </div>
                    <form id="word-easy">
                        <input id="english" type="text" placeholder="ÏòÅÏñ¥ ÏûÖÎ†•" class="english-easy">
                        <input id="korean" type="text" placeholder="ÌïúÍ∏Ä ÏûÖÎ†•" class="korean-easy">
                        <input id="easy" type="hidden" placeholder="easy" class="easy">
                        <button class="matrix-input-btn-easy" id="matrix-input-btn" type="submit">Îì±Î°ùÌïòÍ∏∞</button>
                    </form>
                </div>

                <!-- matrix-item-header -->
                <ul class="matrix-item-list">
                    {% if user and user.id %}
                    {% for word in wordsEasy %}
                    <li class="list-item" id="${word.wordIdx}">
                        <div class="done-text-container">
                            <input type="checkbox" class="word-done" {{word.status}} name="countCheckbox"
                                onClick="getCountCheckbox()" />
                            <p class="word-text-eng">{{word.english}}</p>
                        </div>
                        <div class="done-text-container">
                            <p class="word-text-kor">{{word.korean}}</p>
                            <p class="word-text-eng">[{{word.id}}]</p>
                        </div>
                        <div class="update-delete-container">
                            <i class="word-update fa-solid fa-pencil"></i>
                            <i class="word-delete fa-solid fa-trash-can"></i>
                        </div>
                    </li>
                    {% endfor %}
                    {% endif %}
                </ul>
            </div>
            <div class="matrix-item" id="middle">
                <div class="matrix-item-header">
                    <div class="matrix-title">ü•à Middle </div>
                    <form id="word-middle">
                        <input id="english" type="text" placeholder="ÏòÅÏñ¥ ÏûÖÎ†•" class="english-middle">
                        <input id="korean" type="text" placeholder="ÌïúÍ∏Ä ÏûÖÎ†•" class="korean-middle">
                        <input id="middle" type="hidden" placeholder="middle" class="middle">
                        <button class="matrix-input-btn-middle" id="matrix-input-btn" type="submit">Îì±Î°ùÌïòÍ∏∞</button>
                    </form>
                </div>

                <!-- matrix-item-header -->
                <ul class="matrix-item-list">
                    {% if user and user.id %}
                    {% for word in wordsMiddle %}
                    <li class="list-item" id="${word.wordIdx}">
                        <div class="done-text-container">

                            <input type="checkbox" class="word-done" {{word.status}} name="countCheckbox"
                                onClick="getCountCheckbox()" />
                            <p class="word-text-eng">{{word.english}}</p>
                        </div>
                        <div class="done-text-container">
                            <p class="word-text-kor">{{word.korean}}</p>
                            <p class="word-text-eng">[{{word.id}}]</p>
                        </div>
                        <div class="update-delete-container">
                            <i class="word-update fa-solid fa-pencil"></i>
                            <i class="word-delete fa-solid fa-trash-can"></i>
                        </div>
                    </li>
                    {% endfor %}
                    {% endif %}
                </ul>
            </div>
            <!-- matrix-item do -->
            <div class="matrix-item" id="advance">
                <div class="matrix-item-header">
                    <div class="matrix-title">ü•á Advance </div>
                    <form id="word-advance">
                        <input id="english" type="text" placeholder="ÏòÅÏñ¥ ÏûÖÎ†•" class="english-advance">
                        <input id="korean" type="text" placeholder="ÌïúÍ∏Ä ÏûÖÎ†•" class="korean-advance">
                        <input id="advance" type="hidden" placeholder="advance" class="advance">
                        <button class="matrix-input-btn-advance" id="matrix-input-btn" type="submit">Îì±Î°ùÌïòÍ∏∞</button>
                    </form>
                </div>
                <!-- matrix-item-header -->
                <ul class="matrix-item-list">
                    {% if user and user.id %}
                    {% for word in wordsAdvance %}
                    <li class="list-item" id="${word.wordIdx}">
                        <div class="done-text-container">

                            <input type="checkbox" class="word-done" {{word.status}} name="countCheckbox"
                                onClick="getCountCheckbox()" />
                            <p class="word-text-eng">{{word.english}}</p>
                        </div>
                        <div class="done-text-container">
                            <p class="word-text-kor">{{word.korean}}</p>
                            <p class="word-text-eng">[{{word.id}}]</p>
                        </div>
                        <div class="update-delete-container">
                            <i class="word-update fa-solid fa-pencil"></i>
                            <i class="word-delete fa-solid fa-trash-can"></i>
                        </div>
                    </li>
                    {% endfor %}
                    {% endif %}
                </ul>
            </div>
            <div class="deleted-items">
                <div class="deleted-item-list">
                    <p>ÏÇ≠Ï†úÌïú Îã®Ïñ¥Îì§</p>
                    <button class="deletedWord-btn" id="D">Îã®Ïñ¥ ÌôïÏù∏ÌïòÍ∏∞</button>
                    <button class="deletedWord-btn-close">Îã´Í∏∞</button>
                    <div class="deletedWord-result" name="deletedItems">

                    </div>
                </div>
            </div>
        </div>
    </div>
</main>
{% endblock %}

{% block script %}
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script>
    window.onload = () => {
        if (new URL(location.href).searchParams.get('loginError')) {
            alert(new URL(location.href).searchParams.get('loginError'));
        }
    };
    //word-easy Í∏ÄÏì∞Í∏∞
    document.getElementById('word-easy').addEventListener('submit', async (event) => {
        const $english = document.querySelector(".english-easy");
        const $korean = document.querySelector(".korean-easy")
        const $type = document.querySelector(".easy")

        event.preventDefault();
        let english = $english.value;
        let korean = $korean.value;
        let type = $type.id;

        console.log(english, korean, type);

        if (!english || !korean) {
            alert("ÏòÅÏñ¥, ÌïúÍ∏Ä Îã®Ïñ¥Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî");
            return false;
        }

        try {
            await axios.post('/word/easy', { english, korean, type });
            location.reload();
        } catch (err) {
            console.error(err);
        }
        english.value = '';
        korean.value = '';
        type.value = "easy";
    });

    //word-middle Í∏ÄÏì∞Í∏∞
    document.getElementById('word-middle').addEventListener('submit', async (event) => {
        const $english = document.querySelector(".english-middle");
        const $korean = document.querySelector(".korean-middle")
        const $type = document.querySelector(".middle")

        event.preventDefault();
        let english = $english.value;
        let korean = $korean.value;
        let type = $type.id;

        console.log(english, korean, type);

        if (!english || !korean) {
            alert("ÏòÅÏñ¥, ÌïúÍ∏Ä Îã®Ïñ¥Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî");
            return false;
        }

        try {
            await axios.post('/word/middle', { english, korean, type });
            location.reload();
            // getUser();
        } catch (err) {
            console.error(err);
        }
        english.value = '';
        korean.value = '';
        type.value = "middle";
    });

    //word-advance Í∏ÄÏì∞Í∏∞
    document.getElementById('word-advance').addEventListener('submit', async (event) => {
        const $english = document.querySelector(".english-advance");
        const $korean = document.querySelector(".korean-advance")
        const $type = document.querySelector(".advance")

        event.preventDefault();
        let english = $english.value;
        let korean = $korean.value;
        let type = $type.id;

        console.log(english, korean, type);

        if (!english || !korean) {
            alert("ÏòÅÏñ¥, ÌïúÍ∏Ä Îã®Ïñ¥Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî");
            return false;
        }

        try {
            await axios.post('/word/advance', { english, korean, type });
            location.reload();
        } catch (err) {
            console.error(err);
        }
        english.value = '';
        korean.value = '';
        type.value = "advance";
    });
    //word-easy ÏàòÏ†ï - Ï≤¥ÌÅ¨Î∞ïÏä§


    //word-easy ÏàòÏ†ï
    // document.querySelectorAll('word-update').addEventListener('click', async (event) => {
    //     english = prompt("ÏàòÏ†ïÌï† ÏòÅÏñ¥Îã®Ïñ¥Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî");
    //     korean = prompt("ÏàòÏ†ïÌï† Îã®Ïñ¥ ÎúªÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî");
    //     event.preventDefault();

    //     console.log(english, korean, type);

    //     if (!english || !korean) {
    //         alert("ÏòÅÏñ¥, ÌïúÍ∏Ä Îã®Ïñ¥Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî");
    //         return false;
    //     }

    //     try {
    //         await axios.post('/word/easy', { english, korean, type });
    //         // getUser();
    //     } catch (err) {
    //         console.error(err);
    //     }
    //     english.value = '';
    //     korean.value = '';
    //     type.value = "easy";
    // });

</script>
{% endblock %}